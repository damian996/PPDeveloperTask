(function(){var n=angular.module("HomeIndex",[]),t;n.factory("dataService",["$http","$q",function(n,t){var i=[],r=function(){var r=t.defer();return n.get("api/products").then(function(n){angular.copy(n.data,i);r.resolve()},function(){r.reject()}),r.promise};return{categories:i,getProducts:r}}]);n.factory("checkoutService",["$http","$q",function(n,t){var i={},r=function(r){var u=t.defer();return n.post("api/checkout",r).then(function(n){angular.copy(n.data,i);u.resolve()},function(){u.reject()}),u.promise};return{processedBasket:i,checkout:r}}]);t=["dataService","checkoutService",function(n,t){this.selectedCategory=1;this.basket={};this.processedBasket={};this.basket.total=0;this.basket.basketItems=[];this.data=n;n.getProducts().then(function(){},function(){alert("Could not load products.")});this.selectCategory=function(n){this.selectedCategory=n};this.isCategorySelected=function(n){return this.selectedCategory===n};this.addToTheBasket=function(n){var t=this.basket.basketItems.indexOf(n),i;t!=-1?(i=this.basket.basketItems[t],i.quantity++,this.basket.basketItems[t]=i):(n.quantity=1,this.basket.basketItems.push(n));this.basket.total+=n.unitPrice};this.removeFromTheBasket=function(n){var t=this.basket.basketItems.indexOf(n);this.basket.total-=n.quantity*n.unitPrice;this.basket.basketItems.splice(t,1)};this.processedBasket=t.processedBasket;this.checkout=function(n){t.checkout(n).then(function(){},function(){alert("Checkout error!")})}}];n.controller("ProductController",t)})();
//# sourceMappingURL=home-index.min.js.map
