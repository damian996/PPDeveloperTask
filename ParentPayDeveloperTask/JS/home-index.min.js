(function(){var n=angular.module("HomeIndex"),t,i;n.factory("dataService",["$http","$q",function(n,t){var i=[],r=function(){var r=t.defer();return n.get("api/products").then(function(n){angular.copy(n.data,i);r.resolve()},function(){r.reject()}),r.promise};return{categories:i,getProducts:r}}]);n.factory("orderService",["$http","$q",function(n,t){var i={},r=function(r){var u=t.defer();return n.get("api/checkout?basketId="+r).then(function(n){angular.copy(n.data,i);u.resolve()},function(){u.reject()}),u.promise};return{basket:i,getOrder:r}}]);n.factory("checkoutService",["$http","$q",function(n,t){var i=function(i){var r=t.defer();return n.post("api/checkout",i).then(function(n){r.resolve(n.data)},function(){r.reject()}),r.promise};return{checkout:i}}]);t=["$scope","$window","dataService","checkoutService",function(n,t,i,r){n.selectedCategory=1;n.basket={};n.basket.total=0;n.basket.basketItems=[];n.data=i;i.getProducts().then(function(){},function(){alert("Could not load products.")});n.selectCategory=function(t){n.selectedCategory=t};n.isCategorySelected=function(t){return n.selectedCategory===t};n.addToTheBasket=function(n){var t=this.basket.basketItems.indexOf(n),i;t!=-1?(i=this.basket.basketItems[t],i.quantity++,this.basket.basketItems[t]=i):(n.quantity=1,this.basket.basketItems.push(n));this.basket.total+=n.unitPrice};n.removeFromTheBasket=function(n){var t=this.basket.basketItems.indexOf(n);this.basket.total-=n.quantity*n.unitPrice;this.basket.basketItems.splice(t,1)};n.checkout=function(n){r.checkout(n).then(function(n){t.location="#/order/"+n},function(){alert("Checkout error!")})}}];i=["$scope","$routeParams","orderService",function(n,t,i){n.data=i;i.getOrder(t.id).then(function(){},function(){alert("Could not load order summary!")})}];n.controller("ProductController",t);n.controller("OrderController",i)})();
//# sourceMappingURL=home-index.min.js.map
